-- Ultimate Chat Logs (75 Messages) - Works on New & Old Chat
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local TextChatService = game:GetService("TextChatService")
local LocalPlayer = Players.LocalPlayer

-- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù„ÙˆÙ‚Ø²
local MAX_LOGS = 75
local logsData = {}

-- Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
local sg = Instance.new("ScreenGui", game.CoreGui)
local mainFrame = Instance.new("Frame", sg)
local scroll = Instance.new("ScrollingFrame", mainFrame)
local layout = Instance.new("UIListLayout", scroll)
local title = Instance.new("TextLabel", mainFrame)

mainFrame.Size = UDim2.new(0, 350, 0, 300)
mainFrame.Position = UDim2.new(0.5, -175, 0.5, -150)
mainFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
mainFrame.BackgroundTransparency = 0.2
mainFrame.Visible = false -- ÙŠØ¨Ø¯Ø£ Ù…Ø®ÙÙŠØŒ Ø§Ø¶ØºØ· L Ù„Ù„Ø¥Ø¸Ù‡Ø§Ø±
mainFrame.Active = true
mainFrame.Draggable = true

title.Size = UDim2.new(1, 0, 0, 30)
title.Text = "ğŸ“ LOGS [75] - Press L to Close"
title.BackgroundColor3 = Color3.fromRGB(0, 120, 215)
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.Font = Enum.Font.GothamBold
title.Parent = mainFrame

scroll.Size = UDim2.new(1, -10, 1, -40)
scroll.Position = UDim2.new(0, 5, 0, 35)
scroll.BackgroundTransparency = 1
scroll.CanvasSize = UDim2.new(0, 0, 0, 0)
scroll.ScrollBarThickness = 4

layout.SortOrder = Enum.SortOrder.LayoutOrder
layout.Padding = UDim.new(0, 3)

-- ÙˆØ¸ÙŠÙØ© Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø±Ø³Ø§Ù„Ø©
local function addLog(name, msg, color)
    local timeStr = os.date("%H:%M")
    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, -10, 0, 20)
    label.Text = string.format("[%s] %s: %s", timeStr, name, msg)
    label.TextColor3 = color or Color3.fromRGB(255, 255, 255)
    label.BackgroundTransparency = 1
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.Font = Enum.Font.SourceSans
    label.TextSize = 15
    label.Parent = scroll
    
    table.insert(logsData, label)
    if #logsData > MAX_LOGS then
        local old = table.remove(logsData, 1)
        old:Destroy()
    end
    scroll.CanvasSize = UDim2.new(0, 0, 0, layout.AbsoluteContentSize.Y)
    scroll.CanvasPosition = Vector2.new(0, layout.AbsoluteContentSize.Y)
end

-- Ø·Ø±ÙŠÙ‚Ø© 1: Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯ (TextChatService)
TextChatService.MessageReceived:Connect(function(textObject)
    local sender = textObject.TextSource and textObject.TextSource.Name or "System"
    addLog(sender, textObject.TextContent, Color3.fromRGB(200, 255, 200))
end)

-- Ø·Ø±ÙŠÙ‚Ø© 2: Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù‚Ø¯ÙŠÙ… (Legacy Chat)
for _, p in pairs(Players:GetPlayers()) do
    p.Chatted:Connect(function(msg)
        addLog(p.Name, msg, Color3.fromRGB(255, 255, 255))
    end)
end
Players.PlayerAdded:Connect(function(p)
    p.Chatted:Connect(function(msg)
        addLog(p.Name, msg, Color3.fromRGB(255, 255, 255))
    end)
end)

-- Ø²Ø± L Ù„Ù„ÙØªØ­ ÙˆØ§Ù„Ø¥ØºÙ„Ø§Ù‚
UserInputService.InputBegan:Connect(function(input, gp)
    if gp then return end
    if input.KeyCode == Enum.KeyCode.L then
        mainFrame.Visible = not mainFrame.Visible
    end
end)

-- Ø¥Ø´Ø¹Ø§Ø± ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØªØ´ØºÙŠÙ„
game:GetService("StarterGui"):SetCore("SendNotification", {
    Title = "Logs Loaded!",
    Text = "Press L to open the window",
    Duration = 5
})
