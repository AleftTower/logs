-- Advanced Chat Logs Script (Max 75 Messages)
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local LocalPlayer = Players.LocalPlayer

-- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù„ÙˆÙ‚Ø²
local MAX_LOGS = 75
local logsData = {}

-- Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© (GUI)
local sg = Instance.new("ScreenGui", game.CoreGui)
local mainFrame = Instance.new("Frame", sg)
local scroll = Instance.new("ScrollingFrame", mainFrame)
local layout = Instance.new("UIListLayout", scroll)
local title = Instance.new("TextLabel", mainFrame)

mainFrame.Name = "LogsFrame"
mainFrame.Size = UDim2.new(0, 350, 0, 400)
mainFrame.Position = UDim2.new(0.5, -175, 0.5, -200)
mainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
mainFrame.Visible = false -- ÙŠØ¨Ø¯Ø£ Ù…Ø®ÙÙŠ
mainFrame.Active = true
mainFrame.Draggable = true

title.Size = UDim2.new(1, 0, 0, 30)
title.Text = "ğŸ’¬ Chat Logs (75 Max) - [L] to Hide"
title.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.Font = Enum.Font.SourceSansBold
title.TextSize = 18

scroll.Size = UDim2.new(1, -10, 1, -40)
scroll.Position = UDim2.new(0, 5, 0, 35)
scroll.BackgroundTransparency = 1
scroll.CanvasSize = UDim2.new(0, 0, 0, 0)
scroll.ScrollBarThickness = 6

layout.SortOrder = Enum.SortOrder.LayoutOrder
layout.Padding = UDim.new(0, 5)

-- ÙˆØ¸ÙŠÙØ© Ù„Ø¥Ø¶Ø§ÙØ© Ø±Ø³Ø§Ù„Ø© Ù„Ù„ÙˆÙ‚Ø²
local function addLog(sender, message, isPrivate)
    local timeStr = os.date("%H:%M:%S")
    local typeStr = isPrivate and "[PRIVATE]" or "[PUBLIC]"
    local fullText = string.format("[%s] %s %s: %s", timeStr, typeStr, sender, message)
    
    -- Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù†ØµØ± Ø§Ù„Ù†Øµ ÙÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
    local logLabel = Instance.new("TextLabel")
    logLabel.Size = UDim2.new(1, -10, 0, 25)
    logLabel.Text = fullText
    logLabel.BackgroundTransparency = 1
    logLabel.TextColor3 = isPrivate and Color3.fromRGB(255, 100, 100) or Color3.fromRGB(220, 220, 220)
    logLabel.TextXAlignment = Enum.TextXAlignment.Left
    logLabel.Font = Enum.Font.SourceSans
    logLabel.TextSize = 16
    logLabel.Parent = scroll
    
    table.insert(logsData, logLabel)
    
    -- Ù…Ø³Ø­ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© Ø¥Ø°Ø§ ØªØ¬Ø§ÙˆØ²Øª 75
    if #logsData > MAX_LOGS then
        local oldLog = table.remove(logsData, 1)
        oldLog:Destroy()
    end
    
    -- ØªØ­Ø¯ÙŠØ« Ø­Ø¬Ù… Ø§Ù„Ø³ÙƒØ±ÙˆÙ„
    scroll.CanvasSize = UDim2.new(0, 0, 0, layout.AbsoluteContentSize.Y)
    scroll.CanvasPosition = Vector2.new(0, layout.AbsoluteContentSize.Y)
end

-- Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† (Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø¹Ø§Ù…Ø©)
local function trackPlayer(player)
    player.Chatted:Connect(function(msg)
        addLog(player.Name, msg, false)
    end)
end

for _, p in pairs(Players:GetPlayers()) do trackPlayer(p) end
Players.PlayerAdded:Connect(trackPlayer)

-- Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø®Ø§ØµØ© (ØªØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ù†Ø¸Ø§Ù… Ø§Ù„Ø´Ø§Øª)
-- Ù…Ù„Ø§Ø­Ø¸Ø©: Ø¨Ø¹Ø¶ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ ØªØ´ÙØ± Ø§Ù„Ø®Ø§ØµØŒ Ù„ÙƒÙ† Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯ ÙŠØ­Ø§ÙˆÙ„ Ø§Ù„ØªÙ‚Ø§Ø·Ù‡Ø§
game:GetService("ReplicatedStorage").DefaultChatSystemChatEvents.OnMessageDoneFiltering.OnClientEvent:Connect(function(messageData)
    if messageData.FromSpeaker ~= LocalPlayer.Name then
        -- Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ù…ÙˆØ¬Ù‡Ø© Ù„Ùƒ ÙÙ‚Ø· Ø£Ùˆ Ø®Ø§ØµØ©
        if messageData.MessageType == "Whisper" then
             addLog(messageData.FromSpeaker, messageData.Message, true)
        end
    end
end)

-- Ø²Ø± L Ù„Ù„Ø¥Ø¸Ù‡Ø§Ø± ÙˆØ§Ù„Ø¥Ø®ÙØ§Ø¡
UserInputService.InputBegan:Connect(function(input, gp)
    if gp then return end
    if input.KeyCode == Enum.KeyCode.L then
        mainFrame.Visible = not mainFrame.Visible
    end
end)

game:GetService("StarterGui"):SetCore("SendNotification", {
    Title = "Logs Active âœ…",
    Text = "Press [L] to open Chat Logs",
    Duration = 5
})
